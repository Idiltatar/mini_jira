<%= form_with(model: [@project, issue], class: "row g-3") do |f| %>
  <% if issue.errors.any? %>
    <div class="alert alert-danger">
      <p class="mb-1">
        <strong><%= pluralize(issue.errors.count, "error") %> prevented saving:</strong>
      </p>
      <ul class="mb-0">
        <% issue.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="col-12">
    <%= f.label :title, "Title", class: "form-label" %>
    <%= f.text_field :title, class: "form-control", id: "issue_title" %>
  </div>

  <div class="col-12">
    <%= f.label :description, "Description", class: "form-label" %>
    <%= f.text_area :description, rows: 4, class: "form-control", id: "issue_description" %>
  </div>

  <div class="col-md-4">
    <%= f.label :status, "Status", class: "form-label" %>
    <%= f.select :status, ["Open", "In Progress", "Closed"], {}, class: "form-select", id: "issue_status" %>
  </div>

  <div class="col-md-4">
    <%= f.label :priority, "Priority", class: "form-label" %>
    <%= f.select :priority, ["Low", "Medium", "High"], {}, class: "form-select", id: "issue_priority" %>
  </div>

  <div class="col-md-4">
    <%= f.label :user_id, "Assignee", class: "form-label" %>
    <%= f.collection_select :user_id, User.all, :id, :email,
          { include_blank: "Unassigned" },
          class: "form-select", id: "issue_user_id" %>
  </div>

  <div class="col-12 d-flex gap-2">
    <%= f.submit(issue.persisted? ? "Update Issue" : "Create Issue", class: "btn btn-primary") %>
    <%= link_to "Cancel", project_path(@project), class: "btn btn-outline-secondary" %>
  </div>
<% end %>
